{{- $architecture := or .architecture "arm64" -}}
{{- $firmware_version := or .firmware_version "master" -}}
{{ $suite :=  or .suite "bookworm" }}
{{- $image := or .image "debian-base-image-rpi4.img" -}}

architecture: {{ $architecture }}

actions:
  - action: recipe
    recipe: recipes/01-debian-bullseye-base.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/02-rpi4.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/03-resize-fs.yml
    variables:
      architecture: {{ $architecture }}

  - action: recipe
    recipe: recipes/03-base-packages.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/03-get-raspi-packages.yml

  - action: recipe
    recipe: recipes/04-base-overlay.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/05-wifi-connect.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/06-libcamera.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/07-splash-screen.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/08-poweroff-service.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/11-ovos-font.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/12-ovos-gui-dependencies.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/15-python-3_7.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/20-sj201.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

  - action: recipe
    recipe: recipes/90-base-finalscripts.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}

#  - action: recipe
#    recipe: recipes/98-admin-login.yml
#    variables:
#      architecture: {{ $architecture }}
#      firmware_version: {{ $firmware_version }}
#      suite: {{ $suite }}
#      image: {{ $image }}

  - action: recipe
    recipe: recipes/99-finalize.yml
    variables:
      architecture: {{ $architecture }}
      firmware_version: {{ $firmware_version }}
      suite: {{ $suite }}
      image: {{ $image }}
